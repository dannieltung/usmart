<section class="introducao container">
  <%= render 'form' %>
  <div>
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">Nome</th>
          <th scope="col">Quantidade</th>
          <th scope="col">MÃ©dio</th>
        </tr>
      </thead>
      <tbody>
        <% @unique_ativos.each do |ativo| %>
          <tr>
            <td><%= link_to ativo.nome, ativo_path(ativo) %></td>
            <td><%= Ativo.where(nome: ativo.nome).map { |ativo| ativo.quantidade }.sum %></td>
            <td><%= number_to_currency(Ativo.where(nome: ativo.nome).map { |ativo| ativo.preco }.then { |a| a.sum.to_f / a.size } , unit: 'R$ ', separator: ',', delimiter: '.') %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</section>